============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\rog\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\rog\Downloads\claude-code-security-review-v2\claude-code-security-review-v2
configfile: pytest.ini
plugins: anyio-4.12.1, mock-3.15.1
collecting ... collected 6 items / 5 deselected / 1 selected

claudecode/test_workflow_integration.py::TestWorkflowEdgeCases::test_workflow_with_binary_files FAILED [100%]

================================== FAILURES ===================================
____________ TestWorkflowEdgeCases.test_workflow_with_binary_files ____________
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\shutil.py:636: in _rmtree_unsafe
    os.rmdir(path)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\rog\\AppData\\Local\\Temp\\tmp5oweosnx'

During handling of the above exception, another exception occurred:
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\tempfile.py:893: in onerror
    _os.unlink(path)
E   PermissionError: [WinError 5] Access is denied: 'C:\\Users\\rog\\AppData\\Local\\Temp\\tmp5oweosnx'

During handling of the above exception, another exception occurred:
C:\Users\rog\Downloads\claude-code-security-review-v2\claude-code-security-review-v2\claudecode\test_workflow_integration.py:508: in test_workflow_with_binary_files
    with tempfile.TemporaryDirectory() as tmpdir:
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\tempfile.py:943: in __exit__
    self.cleanup()
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\tempfile.py:947: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\tempfile.py:929: in _rmtree
    _shutil.rmtree(name, onerror=onerror)
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\shutil.py:787: in rmtree
    return _rmtree_unsafe(path, onerror)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\shutil.py:638: in _rmtree_unsafe
    onerror(os.rmdir, path, sys.exc_info())
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\tempfile.py:919: in onerror
    cls._rmtree(path, ignore_errors=ignore_errors,
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\tempfile.py:929: in _rmtree
    _shutil.rmtree(name, onerror=onerror)
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\shutil.py:787: in rmtree
    return _rmtree_unsafe(path, onerror)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\shutil.py:638: in _rmtree_unsafe
    onerror(os.rmdir, path, sys.exc_info())
C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\shutil.py:636: in _rmtree_unsafe
    os.rmdir(path)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\rog\\AppData\\Local\\Temp\\tmp5oweosnx'
---------------------------- Captured stdout call -----------------------------
{
  "pr_number": 2000,
  "repo": "company/app",
  "findings": [],
  "analysis_summary": {
    "files_reviewed": 0,
    "high_severity": 0,
    "medium_severity": 0,
    "low_severity": 0,
    "review_completed": false
  },
  "filtering_summary": {
    "total_original_findings": 0,
    "excluded_findings": 0,
    "kept_findings": 0,
    "filter_analysis": {
      "total_findings": 0,
      "kept_findings": 0,
      "excluded_findings": 0,
      "exclusion_breakdown": {},
      "directory_excluded_count": 0
    },
    "excluded_findings_details": []
  }
}
---------------------------- Captured stderr call -----------------------------
[claudecode.github_action_audit] Using Claude CLI Runner
------------------------------ Captured log call ------------------------------
INFO     claudecode.github_action_audit:github_action_audit.py:449 Using Claude CLI Runner
=========================== short test summary info ===========================
FAILED claudecode/test_workflow_integration.py::TestWorkflowEdgeCases::test_workflow_with_binary_files
======================= 1 failed, 5 deselected in 1.35s =======================
